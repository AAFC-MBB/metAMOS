{"name":"MetAMOS","tagline":"A metagenomic assembly analysis pipeline","body":"# MetAMOS v1.5rc1 \"Praline Brownie\" README\r\nLast updated: February 3rd 2014\r\n***********************************************************************************\r\nWe are happy to announce version 1.5rc1, a.k.a. Praline Brownie \r\n\r\n## Table of Contents ##\r\n\r\n- [NEWS](#news)\r\n- [MetAMOS single file binary](#metamos-single-file-binary)\r\n- [SUMMARY](#summary)\r\n    - [HARDWARE REQUIREMENTS](#a-hardware-requirements)\r\n         - 32GB of RAM\r\n    - [SOFTWARE REQUIREMENTS](#b-software-requirements)\r\n        - git\r\n        - gcc\r\n        - automake\r\n        - python-tools\r\n        - python-devel\r\n        - zlib-devel\r\n        - numpy\r\n        - freetype, freetype-devel\r\n        - libpng-devel\r\n        - matplotlib\r\n        - curl\r\n    - [INSTALLING METAMOS](#c-installing-metamos)\r\n        - python INSTALL.py core\r\n    - [QUICK START](#d-quick-start)\r\n        - initPipeline -q -1 fastq.1 -2 fastq.2 -d projectDir -W core\r\n        - runPipeline -d projectDir -p 16\r\n    - [WORKFLOWS](#e-workflows)\r\n        - core\r\n        - imetamos\r\n    - [GENERIC TOOL](#f-generic-tools)\r\n    - [TEST SUITE](#g-test-suite)\r\n    - [EXAMPLE OUTPUT](#h-example-output)\r\n    - [CONTACT](#i-contact)\r\n    - [CITE](#j-cite)\r\n        - PMID: 23320958\r\n    - [ISSUES](#k-issues)\r\n- [FIN](#end)\r\n\r\n## NEWS\r\n       1. iMetAMOS now available.\r\n       2. Updated 64-bit frozen Linux binary now available (fixed FastQC issue)\r\n       3. Generic framework for adding assemblers/classifiers\r\n       4. SRA run identifiers supported.\r\n       5. Remote input files, as well as compressed input files are supported.\r\n       6. Numerous bug fixes\r\n\r\n*on deck: kmher, and Viritas\r\n\r\n-----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n## MetAMOS single file binary\r\nIn attempt to further simplify the MetAMOS installation process, we are happy to announce the availability of a 'frozen' MetAMOS binary for Linux-x68_64 platforms. Along with this binary comes a significantly reduced list of prerequisites:\r\n\r\n* Java 1.6 (or newer)\r\n* Perl 5.8.8 (or newer)\r\n* 64-bit *nix OS\r\n\r\nThe updated binaries, including several important updates, will be available shorlty for download. In the meantime, please refer to the [Quick Start](#d-quick-start) section on how to download and use MetAMOS.\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n## SUMMARY \r\n        A) HARDWARE REQUIREMENTS\r\n        B) SOFTWARE REQUIREMENTS\r\n        C) INSTALLING MetAMOS\r\n        D) QUICK START\r\n        E) WORKFLOWS\r\n        F) GENERIC TOOL\r\n        G) TEST SUITE\r\n        H) EXAMPLE OUTPUT\r\n        I) CONTACT\r\n        J) CITE\r\n        K) ISSUES\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### A) HARDWARE REQUIREMENTS \r\n\r\nMetAMOS was designed to work on any standard 64bit Linux\r\nenvironment. To use MetAMOS for tutorial/teaching purposes, a minimum\r\nof 8 GB RAM is required. To get started on real data sets a minimum of\r\n32 GB of RAM is recommended, and anywhere from 64-1000 GB may be\r\nnecessary for larger datasets. In our experience, for most 50-100\r\nmillion read datasets, 64 GB is a good place to start (128 GB of memory now\r\navailable on High Memory Instance at Amazon Elastic Compute Cloud ). \r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### B) SOFTWARE REQUIREMENTS \r\n\r\nIf you are using the frozen binary, you can skip this section. The MetAMOS frozen\r\nbinary includes dependencies and only requires perl 5.8+ and java 1.6+.\r\n\r\nThe main prerequisite software for installing/running MetAMOS is python 2.6+, perl 5.8+,\r\nand java 1.6+. Depending on your platform/Linux distribution, you might also need to download and \r\ninstall the following BEFORE running INSTALL.py:\r\n\r\n1. git\r\n2. gcc\r\n3. automake\r\n4. python-tools\r\n5. python-devel\r\n6. zlib-devel\r\n7. numpy\r\n8. freetype, freetype-devel\r\n9. libpng-devel\r\n10. matplotlib\r\n11. curl\r\n12. R\r\n\r\nAdditional software will be downloaded by MetAMOS as needed.\r\nAdditionally, there is some software that MetAMOS can\r\nincorporate into its pipeline that we are not allowed to distribute,\r\nsuch as MetaGeneMark and Newbler. To get a license to use MetaGeneMark, please\r\nvisit: http://exon.gatech.edu/license_download.cgi. Once the tool is installed,\r\nadd it to your PATH variable and MetAMOS will then enable its use in the pipeline.\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### C) INSTALLING MetAMOS \r\n\r\nTo download the software release package, go [here](https://github.com/marbl/metAMOS/archive/v1.5rc1.zip).\r\nYou can also browse the [repository](https://github.com/treangen/MetAMOS/tree/v1.5rc1)\r\nand click on Downloads. Once downloaded, simply unpack the files and\r\nopen the MetAMOS directory. Once inside the MetAMOS directory, run:\r\n```\r\npython INSTALL.py\r\n```\r\nThis will download and install the external dependencies which may \r\ntake minutes or hours to download depending on your connection speed. \r\nmetAMOS supports workflows to install subsets of tools for faster installation.\r\nBy default only the core dependencies are installed. To install iMetAMOS run\r\n```\r\npython INSTALL.py iMetAMOS\r\n```\r\nYou can run:\r\n```\r\npython INSTALL.py -h\r\n```\r\nto get a listing of available workflows and programs. You can specify either\r\nworkflows or programs as arguments to INSTALL.py. For example, to install the \r\ncore workflow plus PhyloSift, run\r\n```\r\npython INSTALL.py core phylosift\r\n```\r\nTo install the programs which are part of the optional workflow run\r\n```\r\npython INSTALL.py optional\r\n```\r\nIf all dependencies are downloaded (including optional/deprecated ones), this will take \r\nquite awhile to complete (plan on a few hours to 2 days).\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### D) QUICK START \r\n\r\nBefore you get started using MetAMOS/iMetAMOS a brief review of its design will\r\nhelp clarify its intended use. MetAMOS gas two main components:\r\n\r\n1. initPipeline\r\n2. runPipeline\r\n\r\nBelow is a simple example of running of iMetAMOS to assemble an SRA dataset:\r\n```\r\ninitPipeline -q -1 SRR987657 -d projectDir -W iMetAMOS\r\nrunPipeline -d projectDir -p 16\r\n```\r\n\r\nThe first component, initPipeline, is for creating new projects and\r\nalso initializing sequence libraries. Currently interleaved &\r\nnon-interleaved fasta, fastq, and SFF files are supported. Input\r\nfiles can be compressed (bzip2, gzip) and can reside on remote\r\nservers (in this case the full URL must be specified). SRA run identifiers\r\nare also supported. \r\n\r\nThe file-type flags (-f, -q, and -s) must be specified before the file.\r\nOnce specified, they remain in effect until a different file type is specified.\r\n\r\nusage: initPipeline -f/-q -1 file.fastq.1 -2 file.fastq.2 -d projectDir -i 300:500 \r\n\r\noptions: -s -c -q, -f, -1, -2, -d, -m, -i\r\n\r\n* -1: either non-paired file of reads or first file in pair, can be list of multiple separated by a comma\r\n* -2: second paired read file, can be list of multiple separated by a comma\r\n* -c:  fasta file containing contigs\r\n* -d: output project directory (required)\r\n* -f: boolean, reads are in fasta format (default is fastq)\r\n* -h: display help message\r\n* -i: insert size of library, can be list separated by commas for multiple libraries\r\n* -l: SFF linker type\r\n* -m: interleaved file of paired reads\r\n* -o: reads are in outtie orientation (default innie)\r\n* -q: boolean, reads are in fastq format (default is fastq)\r\n* -s/--sff: boolean, reads are in SFF format (default is fastq)\r\n* -W: string: workflow name (-W iMetAMOS will run iMetAMOS). A workflow can specify parameters as well as data. A workflow can be immutable in which case any command-line parameters will not be used. Otherwise, command-line parameters take priority over workflow defaults.\r\n\r\nFor example, to input a:\r\n\r\n(non-interleaved fastq, single library)\r\n```\r\ninitPipeline -q -1 file.fastq.1 -2 file.fastq.2 -d projectDir -i 300:500\r\n```\r\n(non-interleaved fasta, single library)\r\n```\r\ninitPipeline -f -1 file.fastq.1 -2 file.fastq.2 -d projectDir -i 300:500\r\n```\r\n(interleaved fastq, single library)\r\n```\r\ninitPipeline -q -m file.fastq.12  -d projectDir -i 300:500\r\n```\r\n(interleaved fastq, multiple libraries)\r\n```\r\ninitPipeline -q -m file.fastq.12,file2.fastq.12  -d projectDir -i 300:500,1000:2000\r\n```\r\n(interleaved fastq, multiple libraries, existing assembly)\r\n```\r\ninitPipeline -q -m file.fastq.12,file2.fastq.12 -c file.contig.fa -d projectDir -i 300:500,1000:2000\r\n```\r\n(non-interleaved remote fastq, single library)\r\n```\r\ninitPipeline -q -1 ftp://ftp.cbcb.umd.edu/pub/data/metamos/gage-b-rb.miseq.1.fastq.gz -2 ftp://ftp.cbcb.umd.edu/pub/data/metamos/gage-b-rb.miseq.2.fastq.gz -d projectDir -i 300:500\r\n```\r\n(unpaired SRA run using iMetAMOS)\r\n```\r\ninitPipeline 1 <SRA RUN ID> -d projectDir -W iMetAMOS\r\n```\r\n(paired-end SRA run using iMetAMOS)\r\n```\r\ninitPipeline -m <SRA RUN ID> -d projectDir -i 300:500 -W imetAMOS\r\n```\r\nThe second component, runPipeline, takes a project directory as\r\ninput and runs the following steps by default:\r\n\r\n1. Preprocess\r\n2. Assemble\r\n3. FindORFs\r\n4. Validate\r\n5. FindRepeats\r\n6. Abundance\r\n7. Annotate\r\n8. FunctionalAnnotation\r\n9. Scaffold\r\n10. Propagate \r\n11. FindScaffoldORFs\r\n12. Classify \r\n13. Postprocess\r\n\r\nusage info:\r\n\r\nusage: runPipeline [options] -d projectdir\r\n\r\n*   -h = <bool>:   print help [this message]\r\n*   -j = <bool>:   just output all of the programs and citations then exit (default = NO)\r\n*   -v = <bool>:   verbose output? (default = NO)\r\n*   -d = <string>: directory created by initPipeline (REQUIRED)\r\n\r\n[options]: [pipeline_opts] [misc_opts]\r\n\r\n[pipeline_opts]: options that affect the pipeline execution\r\n\r\nPipeline consists of the following steps:\r\n\r\nPreprocess, Assemble, FindORFS, MapReads, Validate, Abundance, Annotate,\r\n  Scaffold, Propagate, Classify, Postprocess\r\n\r\nEach of these steps can be referred to by the following options:\r\n\r\n*   -f = <string>: force this step to be run (default = NONE)\r\n*   -s = <string>: start at this step in the pipeline (default = Preprocess)\r\n*   -e = <string>: end at this step in the pipeline (default = Postprocess)\r\n*   -n = <string>: step to skip in pipeline (default=NONE)\r\n\r\nFor each step you can fine-tune the execution as follows\r\n\r\n[Preprocess]\r\n\r\n*   -t = <string>:   enable filter of input reads (default = metAMOS, options = metAMOS, EA-UTILS, PBcR for PacBio sequences)\r\n*   -q = <bool>:   produce FastQC quality report for reads with quality information (fastq or sff)? (default = NO)\r\n\r\n[Assemble]\r\n\r\n*   -a = <string>: genome assembler to use (default = SOAPdenovo).\r\n    \t  This can also be a comma-separated list of assembler (for example: soap,velvet)\r\n\t\t  in this case, all selected assemblers will be run and the best selected for subsequent analysis\r\n*   -k = <kmer size>: k-mer size to be used for assembly (default = auto-selected).\r\n*         This can also be a comma-separated list of kmers to use\r\n*   -o = <int>:    min overlap length\r\n\r\n[MapReads]\r\n\r\n*   -m = <string>: read mapper to use? (default = bowtie)\r\n*   -i = <bool>:   save bowtie (i)ndex (default = NO)\r\n*   -b = <bool>:   create library specific per bp coverage of assembled contigs (default = NO)\r\n\r\n[FindORFS]\r\n\r\n*   -g = <string>: gene caller to use (default=FragGeneScan)\r\n*   -l = <int>:    min contig length to use for ORF call (default = 300)\r\n*   -x = <int>:    min contig coverage to use for ORF call (default = 3X)\r\n\r\n[Validate]\r\n\r\n*   -X = <string>: comma-separated list of validators to run on the assembly. (default = lap, supported = reapr,orf,lap,ale,quast,frcbam,freebayes,cgal,n50)\r\n*   -S = <string>: comma-separated list of scores to use to select the winning assembly. By default, all validation tools specified by -X will be run. For each score, an optional weight can be specified as SCORE:WEIGHT. For example, LAP:1,CGAL:2 (supported = all,lap,ale,cgal,snp,frcbam,orf,reapr,n50)\r\n\r\n[Annotate]\r\n\r\n*   -c = <string>: classifier to use for annotation (default = FCP)\r\n*   -u = <bool>:   annotate unassembled reads (default = NO)\r\n\r\n[Classify]\r\n\r\n*   -z = <string>: taxonomic level to categorize at (default = class)\r\n\r\n[misc_opts]: Miscellaneous options\r\n\r\n*   -r = <bool>:   retain the AMOS bank  (default = NO)\r\n*   -p = <int>:    number of threads to use (be greedy!) (default=1)\r\n*   -4 = <bool>:   454 data (default = NO)\r\n\r\nFor example, to enable read filtering:\r\n```\r\n-t\r\n```\r\nand to enable meta-IDBA as the assembler:\r\n```\r\n-a metaidba\r\n```\r\nAnd to use PhyloSift to annotate:\r\n```\r\n-c phylosift\r\n```\r\nAny single step in the pipeline can be skipped by passing the\r\nfollowing parameter to runPipeline:\r\n```\r\n-n,--skipsteps=Step1,..\r\n```\r\nMetAMOS reruns steps based on timestamp information, so if the input\r\nfiles for a step in the pipeline hasn't changed since the last run, it\r\nwill be skipped automatically. However, you can forcefully run any step\r\nin the pipeline by passing the following parameter to runPipeline:\r\n```\r\n-f,--force=Step1,..\r\n```\r\nMetAMOS stores a summary of the input libraries in pipeline.ini \r\nin the working directory. The pipeline.conf file stores the list \r\nof programs available to MetAMOS. Finally, pipeline.run stores the \r\nselected parameters and programs for the current run. MetAMOS also stores \r\ndetailed logs of all commands executed by the pipeline in Logs/COMMANDS.log \r\nand a log for each step of the pipeline in Logs/<STEP NAME>.log\r\n\r\nUpon completion, all of the final results will be stored in the\r\nPostprocess/out directory. A component, create_summary.py, takes\r\nthis directory as input and as output, generates an HTML page with\r\nwith summary statistics and a few plots. An optional component, create_plots.py,\r\ntakes one or multiple Postprocess/out directories as input and generates\r\ncomparative plots.\r\n\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### E) WORKFLOWS\r\n\r\nA workflow is a text-file that specified command-line options and input sequences\r\nrequired to run metAMOS. A workflow may optionally inherit options/data from other\r\nworkflows. A workflow may also be immutable if the parameters should not be modifiable\r\nby a user. An example workflow is below:\r\n```\r\ninherit:isolate\r\nmodify:True\r\ncommand: -q -u -r -v -I -c kraken -p 16 -a spades,velvet-sc,abyss,ray,edena,sga,masurca,soap,soap2,velvet -t metamos -n FunctionalAnnotation -f Postprocess -z phylum\r\nasmcontigs:\t/Users/skoren/Personal/Research/metAMOS/Test/test.asm,ftp://ftp.ncbi.nih.gov/genomes/Bacteria/Candidatus_Carsonella_ruddii_uid58773/NC_008512.fna\r\nlib1format:\tfasta\r\nlib1mated:\tTrue\r\nlib1innie:\tTrue\r\nlib1interleaved:\tTrue\r\nlib1f1:\t/Users/skoren/Personal/Research/metAMOS/Test/carsonella_pe_filt.fna.gz,2000,5000,3500,500\r\n```\r\nThe available options are:\r\n\r\n*   inherit\t- any other workflows to inherit from. In this case, the workflow inherits options from the isolate workflow\r\n*\tmodify\t- whether users are allowed to specify command-line parameters at runtime. If false, command-line options are ignored\r\n*\tcommand\t- command-line options to specify for runPipeline\r\n*\tasmcontigs - optional, pre-assembled contigs to include in analysis. Can be remote file. Multiple files can be separated using commas.\r\n*\tlib#format - input type for lib #. Can be fasta/fastq/sff\r\n*\tlib#mated - whether the library is mated or not\r\n*\tlib#innie - whether the mates are in the innie (Illumina paired-end) format or not (Illumina mate-pair)\r\n*\tlib#interleaved - whether the input sequences are in a single file or in two separate files\r\n*\tlib#f1 \t- the name of the input file, along with library min, max, mean, stdev\r\n\r\nAn arbitrary number of libraries may be specified in the above format. The below example shows an unmated library:\r\n```\r\nlib1format:\tfasta\r\nlib1mated:\tFalse\r\nlib1innie:\tFalse\r\nlib1interleaved:\tFalse\r\nlib1frg:\t/Users/skoren/Personal/Research/metAMOS/Test/carsonella_pe_filt.fna.gz\r\n```\r\nas well as a non-interleaved library:\r\n```\r\nlib1format:     fasta\r\nlib1mated:      True\r\nlib1innie:      True\r\nlib1interleaved:        False\r\nlib1f1: /Users/skoren/Personal/Research/metAMOS/Test/carsonella_pe_1.fna.gz,2000,5000,3500,500\r\nlib1f2: /Users/skoren/Personal/Research/metAMOS/Test/carsonella_pe.2.fna.gz,2000,5000,3500,500\r\n```\r\n\r\nWorkflows may be shared between users, as long as the input files are accessible (i.e. they are on a remote server or the systems share a file system). Workflow files should be placed in the metAMOS/workflows directory or the working directory where MetAMOS is launched.\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### F) GENERIC TOOLS\r\n\r\nMetAMOS allows new tools to be added to the ASSEMBLE and ANNOTATE steps without requiring code changes. The addition of a tool is a three-step process. \r\n\r\n###### 1) Add the tool name under metAMOS/Utilities/\\<STEPNAME\\>.generic. For example. if you want to add a new assembler, you would modify ASSEMBLE.generic. This file contains one tool name per line. The tool name is arbitrary text and will be used by MetAMOS to look up detailed configuration. The current ASSEMBLE.generic looks like:\r\n```\r\n% cat Utilities/config/ASSEMBLE.generic\r\nabyss\r\nsga\r\nspades\r\nray\r\nmasurca\r\nmira\r\nedena\r\nidba-ud\r\n```\r\nYou can add multiple versions of an assembler. In this documentation, we will add SOAPdenovo v1.05 in addition to the above tools. First, we will add soap_v105 to the end of ASSEMBLE.generic:\r\n```\r\n% cat Utilities/config/ASSEMBLE.generic\r\nabyss\r\nsga\r\nspades\r\nray\r\nmasurca\r\nmira\r\nedena\r\nidba-ud\r\nsoap_v105\r\n```\r\n###### 2) Write a configuration file for the tool. The configuration file specifies input requirements for the program as well as a name, output, and executable location. Within configuration files, several keywords may be specified that are updated at runtime. The list of currently supported keywords can be found at the end of this section. In the above example, MetAMOS would expect a file named soap_v105.spec.\r\n\r\nBelow is an example configuration file used for Ray:\r\n```\r\n% cat Utilities/config/ray.spec \r\n[CONFIG]\r\nmaxlibs 1\r\ninput FASTQ\r\nname Ray\r\noutput [PREFIX]_ray/Contigs.fasta\r\nscaffoldOutput [PREFIX]_ray/Scaffolds.fasta\r\nlocation cpp/[MACHINE]/Ray/bin\r\nthreads -n\r\npaired_interleaved -i [FIRST]\r\npaired -p [FIRST] [SECOND]\r\ncommands rm -rf [RUNDIR]/ray && \\\r\n\t\t[MPI] [THREADS] Ray \\\r\n\t\t-o [RUNDIR]/[PREFIX]_ray [INPUT]\r\nunpaired -s [FIRST]\r\n[Ray]\r\nk\t[KMER]\r\n```\r\nThe [CONFIG] section is the generic configuration section, you can specify step-specific configuration later on. Here, most properties of where the tool is located, what its output is, and what input it requires is specified:\r\n\r\n * input - the type of input (FASTQ in this case)\r\n * name - the full name of the tool you want to report later on. This can be arbitrary text.\r\n * output - where the output contigs from the tool are. For assemblers, this is contigs. [PREFIX] is a keyword for the MetAMOS prefix for the assembly when it is run. This is assumed to be relative to the MetAMOS run directory.\r\n * scaffoldOutput - where the output scaffolds from the tool are, if available.\r\n * backupOutput - some assemblers fail to generate their final output on some datasets. In this case, this can specify preliminary contig output which will only be used if the main output is not available.\r\n * location - path to the executable. This is relative to metAMOS/Utilities. You can specify [MACHINE] to substitute your machine type into the executable path (i.e. Linux-x86_64). The user path will be searched if the tool is not found in the specified location\r\n * threads - the parameter to pass number of threads to use for the program, if available\r\n * paired - how to pass paired-end (assumed innie) interleaved data (FIRST refers to left mates, SECOND to right)\r\n * paired_interleaved - how to pass paired-end (assumed innie) non-interleaved. FIRST refers to the interleaved file.\r\n * mated - how to pass mate-pair data (assumed outtie) non-interleaved data (FIRST refers to left mates, SECOND to right)\r\n * mated_interleaved - how to pass mate-pair data (assumed outtie) interleaved mates\r\n * unpaired - how to pass fragment data to the program. FIRST refers to the unmated file.\r\n * commands - an arbitrary list of commands to run to execute the tool. Multiple lines are supported with the \\ character. Multiple commands can be specified using &&. In the above example, rm -rf will run first followed by Ray. Common useful keywords are:\r\n    * [PREFIX] - the prefix to use for output \r\n    * [RUNDIR] where the program is running\r\n    * [KMER] - the selected k-mer to use for assembly\r\n    * [MEM] - available memory\r\n    * [THREADS] - the threads parameter and number of threads requested by the user\r\n    * [INPUT] - the formatted input based on the libraries provided to metAMOS\r\n\r\nThe [Ray] section is a step-specific configuration. This is based on the executable names used in commands above. By default the parameters will be passed with prefixed - so here Ray will be run with -k [KMER]\r\n\r\nSome assemblers (SOAPdenovo, MaSuRCA, etc) require an input configuration file rather than taking parameters on the command line. In this case, we need both a spec and template file (soap_v105.spec and soap_v105.template) which will get updated at runtime and passed to the assembler. The [CONFIG] section then includes a config option which specifies the template and the keyword [INPUT] will pass the configuration file rather than library information. \r\n\r\nBelow is an example spec file for SOAPdenovo that requires a template and spec file:\r\n```\r\n% cat Utilities/config/soap_v105.spec\r\n[CONFIG]\r\ninput FASTQ\r\nname soap_v105\r\nthreads -p\r\noutput [PREFIX]/[PREFIX].asm.contig\r\nlocation cpp/[MACHINE]/SOAPdenovo_1.05/\r\nscaffoldOutput [PREFIX]/[PREFIX].asm.scafSeq\r\nconfig config/soap_v105.template\r\nmated rank=[LIB]\\navg_ins=[MEAN]\\nreverse_seq=1\\nasm_flags=2\\nq1=[FIRST]\\nq2=[SECOND]\r\npaired rank=[LIB]\\navg_ins=[MEAN]\\nreverse_seq=0\\nasm_flags=3\\nq1=[FIRST]\\nq2=[SECOND]\r\nunpaired rank=[LIB]\\navg_ins=0\\nq=[FIRST]\r\ncommands rm -rf [PREFIX] && \\\r\n         mkdir [PREFIX] && \\\r\n\t SOAPdenovo all -s [INPUT] -o [PREFIX]/[PREFIX].asm -K [KMER] [THREADS]\r\n```\r\n```\r\n% cat Utilities/config/soap_v105.template\r\n#maximal read length\r\nmax_rd_len=150\r\n[LIB]\r\n[INPUT]\r\n```\r\nHere, the config template is specified (again relative to metAMOS/Utilities) and the [INPUT] keyword will be replaced by the library information at run time.\r\n\r\n###### 3) Add a citation to the tool under metAMOS/doc/citations.rst\r\nCitations are tab-delimited and specify the lower-case tool alias, full tool-name, and citation information. For example:\r\n```\r\nsoap_v105\tSOAPdenovo v1.05\tLi Y, Hu Y, Bolund L, Wang J: State of the art de novo assembly of human genomes from massively parallel sequencing data.Human genomics 2010, 4:271-277.\r\n```\r\nThe citation will be automatically printed by MetAMOS whenever a run uses the specified tool. \r\n\r\n###### 4) For ANNOTATE tools, we also need a way to convert the output to Krona. By default, MetAMOS will look for an Import\\<toolName\\>.pl script. If one is not found, it will rely on a generic import which will assumed a tab-delimited format:\r\n```\r\ncontig/readID\tNCBI Taxonomy ID\r\n```\r\nThe currently supported list of keywords:\r\n\r\n*   MEM - max memory limit\r\n*   LIB - library identifier (i.e. 1, 2, 3, etc)\r\n*   INPUT - replace with input to the program (a collection of input files or libraries depending on the step or a configuration file)\r\n*   MACHINE - replaced with Linux-x86_64, Darwin-x86_64, etc\r\n*   FIRST - replaced with left mates in mated read or interleaved or unpaired reads otherwise\r\n*   SECOND - replaced with right mates, in paired non-interleaved libs\r\n*   ORIENTATION - replaced with the word innie or outtie\r\n*   ORIENTATION_FIGURE - replaced with ---> <--- or <--- ---> for pe and mp, respectively\r\n*   MEAN - replaced with library mean\r\n*   SD - replaced with library standard dev\r\n*   MIN - replaced with library min\r\n*   MAX - replaced with library max\r\n*   THREADS - replaced with thread parameter specified and requested number of threads\r\n*   KMER - the kmer requested\r\n*   OFFSET - the phred offset (33/64) of the input files\r\n*   PREFIX - the desired prefix for the program output\r\n*   DB - the location of the MetAMOS DBs (i.e. Utilities/DB)\r\n*   RUNDIR - the location where the program is running (i.e. MetAMOS run directory)\r\n*   LOCATION - the location where the program executable lives\r\n*   TECHNOLOGY - the type of sequencing data (454, Illumina, etc) \r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### G) Test suite\r\n\r\nWe have developed a set of scripts for testing the various features of\r\nMetAMOS. All of these regression test scripts are available inside the\r\n/Test directory and include all necessary datasets to run them. Here\r\nis a brief listing of the test scripts we currently include:\r\n\r\n*Test initPipeline\r\n./Test/test_create.sh\r\n\r\n*Vanilla test\r\n./Test/run_test.sh\r\n\r\n*Test PhlyoSift\r\n./Test/test_amphora.sh\r\n\r\n*Test Minimus\r\n./Test/test_minimus.sh\r\n\r\n*Test Preprocess filtration of non-interleaved fastq files\r\n./Test/test_filter_noninterleaved_fastq.sh\r\n\r\n*Test iMetAMOS\r\n./Test/test_ima.sh\r\n\r\n*Test SRA download\r\n./Test/test_sra.sh\r\n\r\n*Test Newbler (if available)\r\n./Test/test_newbler.sh\r\n\r\n*Test CA (fasta)\r\n./Test/test_ca_fasta.sh\r\n\r\n*Test CA (fastq)\r\n./Test/test_ca.sh\r\n\r\n*Test SOAPdenovo\r\n./Test/test_soap.sh\r\n\r\n*Test MetaVelvet\r\n./Test/test_metavelvet.sh\r\n\r\n*Test SparseAssembler\r\n./Test/test_sparse.sh\r\n\r\n*Test Velvet\r\n./Test/test_velvet.sh\r\n\r\n*Test FCP\r\n./Test/test_fcp.sh\r\n\r\n*Test Spades\r\n./Test/test_spades.sh\r\n\r\n*Test BLAST\r\n./Test/test_blast.sh\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### H) Example output\r\n\r\nMetAMOS generates an interactive web page once a run successfully completes:\r\nhttp://www.cbcb.umd.edu/~sergek/imetamos/gageb/Postprocess/out/html/summary.html\r\n\r\nThis includes summary statistics and taxonomic information based on Krona [1].\r\nThe easiest way to interact with the results is through the web interface.\r\nThe Postprocess/out directory contains the results of the analysis. By default, \r\nmetAMOS uses the prefix \"proba\" (Galician for test). Thus, files will have the name \"proba\".*.\r\n\r\n* abundance.krona.html\r\n    \r\n    Krona [1] plot of abundances using the tool selected for abundance (MetaPhyler [2] by default)\r\n\r\n* annotate.krona.html\t\r\n\r\n    Krona [1] plot of abundances using the tool selected for classification (Kraken [3] by default)\r\n\r\n* asm.scores\t\t\r\n\r\n    Validation scores for each assembly/kmer combination run. Header contains information on scores generated\r\n\r\n* best.asm\t\t\r\n\r\n    The name of the assembly/kmer combination that was selected as the best\r\n\r\n* <taxonomy>.classified\t\r\n\r\n    Subdirectory containing each level of the selected taxonomy (class by default) and the contigs/reads/orfs belonging to each\r\n\r\n* <taxonomy>.original.annots\t\r\n\r\n    Tab-delimited taxonomic level assignments for each contig/unassembled read. Class IDs correspond to NCBI taxonomy IDs.\r\n\r\n* <taxonomy>.original.reads.annots\t\r\n\r\n    Tab-delimited taxonomic level assignments as above, where contigs are replaced with their constituent sequences.\r\n\r\n* <taxonomy>.propagated.annots\t\t\r\n\r\n    Tab-delimited file as above after assembly graph-based propagation of assignments to contigs.\r\n\r\n* <taxonomy>.propagated.reads.annots\t\r\n\r\n    Tab-delimited file as above after propagation and having contigs replaced with their constituent reads.\r\n\r\n* html\t\t\t\t\r\n\r\n    HTML output from the pipeline. summary.html contains an interactive results view.\r\n\r\n* proba.bnk\t\t\t\r\n\r\n    AMOS bank format of the assembly that can be visualized using Hawkeye.\r\n\r\n* proba.classify.txt\t\t\r\n\r\n    The raw output of the abundances using the tool selected for abundance estimations (MetaPhyler [2] by default)\r\n\r\n* proba.ctg.cnt\t\t\t\r\n\r\n    The number of sequences mapped to each assembly contig\t\r\n\r\n* proba.ctg.cvg\t\t\t\r\n\r\n    The coverage of each assembly contig\r\n\r\n* proba.ctg.fa\t\t\t\r\n\r\n    The assembled contigs\r\n\r\n* proba.hits\t\t\t\r\n\r\n    The raw output of the contig/unassembled reads classifications using the selected tool (Kraken [3]) by default.\r\n\r\n* proba.lib1.contig.reads\t\r\n\r\n    The per-library assignment of sequences to contigs\r\n\r\n* proba.lib1.unaligned.fasta\t\r\n\r\n    The per-library unassembled sequences\r\n\r\n* proba.scf.fa\t\t\t\r\n\r\n    The assembled scaffolds\r\n\r\n* proba.motifs.fa    \t\t\r\n\r\n    The motifs within scaffolds identified by Bambus 2\r\n\r\n* proba.orf.faa\r\n\r\n    The protein sequences of identified open reading frames (ORFs) in the assembly and unassembled reads\r\n\r\n* proba.orf.fna\r\n\r\n    The fasta sequences of identified open reading frames (ORFs) in the assembly and unassembled reads\r\n\r\n* proba.scf.orf.faa\r\n\r\n    The protein sequences of identified open reading frames (ORFs) in the scaffolds\r\n\r\n* proba.scf.orf.fna\r\n\r\n    The protein sequences of identified open reading frames (ORFs) in the scaffolds\r\n    \r\n* ref.fasta\t\t\t\r\n\r\n    The recruited reference genome used for validation (iMetAMOS only)\r\n\r\n* ref.name\t\t\t\r\n\r\n    The name of the recruited reference genome (iMetAMOS only)\r\n\r\nAdditional details for each step are available under <STEP NAME>/out. This includes the raw\r\noutput (as well as any intermediate files) of any tools run during that step. For example, \r\nAnnotate/out/proba.prokka includes the full Prokka annotation output. \r\nAssemble/out/abyss*/ contains the intermediate files output by ABySS. Additionally, \r\nsince MetAMOS stores all of its results in an AMOS bank, the assemblies \r\ncan be visualized with Hawkeye.\r\n\r\n[1] Ondov BD, Bergman NH, Phillippy AM.. Interactive\r\nmetagenomic visualization in a Web browser. BMC Bioinformatics. 2011\r\nSep 30;12:385.  PMID: 21961884\r\n\r\n[2] Liu B, Gibbons T, Ghodsi M, Treangen T, Pop M. Accurate and fast estimation of taxonomic profiles from metagenomic shotgun sequences. BMC Genomics. 2011;12 Suppl 2:S4. Epub 2011 Jul 27.\r\n\r\n[3] Wood DE, Salzberg SL. Rapid phylogenetic sequence classification through repeated exact alignment. In preparation.\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### I) CONTACT\r\n\r\nIf you encounter any problems/bugs, please check the known issues pages:\r\nhttps://github.com/treangen/MetAMOS/issues?direction=desc&sort=created&state=open\r\nto see if it has already been documented.\r\n\r\nIf not, please report the issue either using the contact information below or \r\nby submitting a new issue online. Please include information on your run,\r\nany output produced by runPipeline, as well as the pipeline.* files and the \r\nLog/<LAST_STEP> file (if not too large).\r\n\r\nWho to contact to report bugs, forward complaints, feature requests:\r\n\r\nTodd Treangen: treangen@gmail.com\r\nSergey Koren: sergek@umd.edu\r\n\r\n----------------------------------------------------------------------------------\r\n[TOC](#table-of-contents)\r\n### J) CITE\r\n\r\nTreangen TJ\\*, Koren S\\*, Sommer DD, Liu B, Astrovskaya I, Ondov B,\r\nDarling AE, Phillippy AM, Pop M.  MetAMOS: a modular and open source\r\nmetagenomic assembly and analysis pipeline. Genome Biol. 2013 Jan\r\n15;14(1):R2. PMID: 23320958.\r\n\r\nurl: http://genomebiology.com/content/pdf/gb-2013-14-1-r2.pdf\r\n\r\n*Indicates both authors contributed equally to this work\r\n\r\n[TOC](#table-of-contents)\r\n### K) ISSUES\r\n\r\nHere is a [link](https://github.com/treangen/metAMOS/issues?state=open) to known, open issues.\r\n\r\n## FIN","google":"UA-42944922-1","note":"Don't delete this file! It's used internally to help with page regeneration."}